<html>
<body>
    <form id="create-room-form" , action="/room/create">
        <label for="name">Name:</label>
        <input type="text" id="name" name="name" required><br>
        <label for="name">Video Url:</label>
        <!-- <input type="text" id="video_url" name="video_url"
            value="https://ta-027.agucdn.com/1ab5d45273a9183bebb58eb74d5722d8ea6384f350caf008f08cf018f1f0566d0cb82a2a799830d1af97cd3f4b6a9a81ef3aed2fb783292b1abcf1b8560a1d1aa308008b88420298522a9f761e5aa1024fbe74e5aa853cfc933cd1219327d1232e91847a185021b184c027f97ae732b3708ee6beb80ba5db6628ced43f1196fe/5bbf6d6f69065d410c40d623afde34fb/ep.1.1677674042.m3u8"
            required><br> -->
        <input type="text" id="video_url" name="video_url" required><br>
        <label for="max_users">Max Users:</label>
        <input type="number" id="max_users" name="max_users" required> <br>
        <input type="checkbox" id="global_control" name="global_control">
        <label for="global_control">Everyone can control video player.</label><br><br>
        <input type="submit" name="Create Room">
    </form>
    <script src="js/utils.js"></script>
    <script>
        const createRoomForm = document.getElementById("create-room-form");
        createRoomForm.onsubmit = async (e) => {
            e.preventDefault();
            const data = formToJson(createRoomForm);
            const respData = await postAsJson(createRoomForm.action, data);
            if (typeof respData.id === "undefined" || typeof respData.ws_path === "undefined") {
                return;
            }
            localStorage.removeItem("jwplayer.mute");
            const encodedRoomId = base64Encode(respData.id);
            console.log(encodedRoomId);
            window.location.assign(getPathUrl("room/" + encodedRoomId));
        }
    </script>
</body>
</html>